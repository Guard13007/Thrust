var Particle=function(t,o,i,h,r){if(t?(this.x=t.x,this.y=t.y):(this.x=0,this.y=0),!o)var o=Particle.effects.standard;this.color=[o.r,o.g,o.b],this.effect=o.method,i?(this.width=i.width,this.height=i.height):(this.width=1,this.height=1),h||(h={x:0,y:0}),this.v=new vector(h.x,h.y),r&&(this.parent=r),o.onCreate&&(this.onCreate=o.onCreate,this.onCreate())};Particle.effects={standard:{r:255,g:255,b:255,method:function(){this.color[0]-=1,this.color[1]-=1,this.color[2]-=1,this.color[0]<1&&this.remove()}},redFlame:{r:240,g:0,b:0,method:function(){this.color[1]<this.color[0]?this.color[1]+=12:this.color[2]<this.color[0]&&(this.color[0]-=12,this.color[1]-=12,this.color[2]-=12),this.color[0]<1&&this.remove()}},cyanFlame:{r:0,g:200,b:250,method:function(){this.color[0]<this.color[2]?this.color[0]+=25:(this.color[0]-=12,this.color[1]-=9,this.color[2]-=12),this.color[0]<1&&this.remove()}},rainbow:{r:0,g:0,b:0,method:function(){this.color[0]+=random.integer(-33,33),this.color[1]+=random.integer(-33,33),this.color[2]+=random.integer(-33,33),(this.color[0]>255||this.color[0]<0||this.color[1]>255||this.color[1]<0||this.color[2]>255||this.color[2]<0)&&this.remove()},onCreate:function(){this.color[0]=random.integer(0,255),this.color[1]=random.integer(0,255),this.color[2]=random.integer(0,255)}}},Particle.prototype={remove:function(){this.parent&&(this.parent.splice&&this.parent.splice(this.parent.indexOf(this),1),delete this)},draw:function(t){t.fillStyle="rgb("+this.color[0]+","+this.color[1]+","+this.color[2]+")",t.translate(this.x,this.y),t.rotate(0),t.fillRect(-this.width/2,-this.height/2,this.width,this.height),t.rotate(0),t.translate(-this.x,-this.y)}};